createDirection=function(e,t,n){if(e instanceof OpenLayers.Geometry.MultiLineString){}else if(e instanceof OpenLayers.Geometry.LineString){return createLineStringDirection(e,t,n)}else{return[]}};createLineStringDirection=function(e,t,n){if(t==undefined){t="end"}if(n==undefined){n=false}var r=[];var i=getSegments(e);var s=[];if(n){s=i}else{if(t=="start"){s.push(i[0])}else if(t=="end"){s.push(i[i.length-1])}else if(t=="middle"){return[getPointOnLine(e,.5)]}else{return[]}}for(var o=0;o<s.length;o++){r=r.concat(createSegDirection(s[o],t))}return r};createSegDirection=function(e,t){var n=bearing(e);var r=[];var i=[];if(t=="start"){r.push([e.x1,e.y1])}else if(t=="end"){r.push([e.x2,e.y2])}else if(t=="middle"){r.push([(e.x1+e.x2)/2,(e.y1+e.y2)/2])}else{return null}for(var s=0;s<r.length;s++){var o=new OpenLayers.Geometry.Point(r[s][0],r[s][1]);var u=new OpenLayers.Feature.Vector(o,{angle:n});i.push(u)}return i};bearing=function(e){b_x=0;b_y=1;a_x=e.x2-e.x1;a_y=e.y2-e.y1;angle_rad=Math.acos((a_x*b_x+a_y*b_y)/Math.sqrt(a_x*a_x+a_y*a_y));angle=360/(2*Math.PI)*angle_rad;if(a_x<0){return 360-angle}else{return angle}};getPointOnLine=function(e,t){var n=getSegments(e);var r=e.getLength();var i=r*t;var s=0;var o=0;for(var u=0;u<n.length;u++){var a=getSegmentLength(n[u]);if(i<s+a){o=i-s;var f=n[u].x1+(n[u].x2-n[u].x1)*o/a;var l=n[u].y1+(n[u].y2-n[u].y1)*o/a;var c=bearing(n[u]);var h=new OpenLayers.Geometry.Point(f,l);var p=new OpenLayers.Feature.Vector(h,{angle:c});return p}s=s+a}return false};getSegmentLength=function(e){return Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2))};getSegments=function(e){var t=e.components.length-1;var n=new Array(t),r,i;for(var s=0;s<t;++s){r=e.components[s];i=e.components[s+1];n[s]={x1:r.x,y1:r.y,x2:i.x,y2:i.y}}return n}