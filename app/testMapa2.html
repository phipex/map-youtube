<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
  <style>
    body,html{
      height: 100%;
      width: 100%;
    }
    #map{
      height: 100%;
      width: 100%;

    }

  </style>

</head>
<body>
<div id="map"></div>
<script src="../bower_components/jquery/dist/jquery.min.js"></script>
<script src="../bower_components/openlayers/OpenLayers.js"></script>
<script src="http://maps.google.com/maps/api/js?v=3&amp;sensor=false"></script>
<script src="scripts/MdlMap.js"></script>
<script src="scripts/gmapolLayerline.js"></script>
<script>
  MdlMap.ini();

  function success(data){
    //console.info(data);
    var layerrepo = new gmapolLayerLine();

    $(data.RECORDS).each(function(index,item){
      //console.info(item);
      var lat = convert(item.lat);
      var lon = convert(item.lon);
      var latlon = new OpenLayers.LonLat(lon, lat).transform(wgs84, mercator);

      layerrepo.pushPoint(latlon.lat,latlon.lon);
    });
    layerrepo.drawRute();
    layerrepo.toExtend(map);
    dataTrack = data.RECORDS;
    //console.info(dataTrack);
  }

  function convert(texto){
    texto = texto.replace(",",".");
    return parseFloat(texto);
  }

  $.ajax({
    //type: "POST",
    dataType: "json",
    //url: "data/combustible_point10.json",
    contentType: "application/json; chartset:utf-8",
    url: "data/reportelog.json",
    data: {},
    success: success,
    error: function (error) {
      console.error(error);
    },
    async: true

  });

</script>

</body>
</html>
